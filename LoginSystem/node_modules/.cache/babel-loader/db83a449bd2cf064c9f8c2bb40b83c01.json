{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/sarvesh./git/React application/LoginSystem/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sarvesh./git/React application/LoginSystem/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/sarvesh./git/React application/LoginSystem/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sarvesh./git/React application/LoginSystem/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/sarvesh./git/React application/LoginSystem/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sarvesh./git/React application/LoginSystem/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{observer}from'mobx-react';import UserStore from'./stores/UserStore';import LoginForm from'./LoginForm';import SubmitButton from'./SubmitButton';import'./App.css';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){_classCallCheck(this,App);return _super.apply(this,arguments);}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('/isLoggedIn',{method:'post',headers:{'Accept':'application/json','Content-Type':'application/json'}});case 3:res=_context.sent;_context.next=6;return res.json();case 6:result=_context.sent;if(result&&result.success){UserStore.loading=false;UserStore.isLoggedIn=true;UserStore.username=result.username;}else{UserStore.loading=false;UserStore.isLoggedIn=false;}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);UserStore.loading=false;UserStore.isLoggedIn=false;case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"doLogout\",value:function(){var _doLogout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch('/logout',{method:'post',headers:{'Accept':'application/json','Content-Type':'application/json'}});case 3:res=_context2.sent;_context2.next=6;return res.json();case 6:result=_context2.sent;if(result&&result.success){UserStore.isLoggedIn=false;UserStore.username='';}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));function doLogout(){return _doLogout.apply(this,arguments);}return doLogout;}()},{key:\"render\",value:function render(){var _this=this;if(UserStore.loading){return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:\"Loading, please wait..\"})});}else{if(UserStore.isLoggedIn){return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[\"Welcome \",UserStore.username,/*#__PURE__*/_jsx(SubmitButton,{text:'Log out',disabled:false,onClick:function onClick(){return _this.doLogout();}})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(LoginForm,{})})});}}}]);return App;}(React.Component);export default observer(App);","map":{"version":3,"sources":["/Users/sarvesh./git/React application/LoginSystem/src/App.js"],"names":["React","observer","UserStore","LoginForm","SubmitButton","App","fetch","method","headers","res","json","result","success","loading","isLoggedIn","username","console","log","doLogout","Component"],"mappings":"qjCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,YAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAO,WAAP,C,GAEMC,CAAAA,G,ufAGoBC,CAAAA,KAAK,CAAC,aAAD,CAAe,CAC9BC,MAAM,CAAC,MADuB,CAE9BC,OAAO,CAAC,CACJ,SAAU,kBADN,CAEJ,eAAgB,kBAFZ,CAFsB,CAAf,C,QAAfC,G,qCAOeA,CAAAA,GAAG,CAACC,IAAJ,E,QAAfC,M,eACJ,GAAIA,MAAM,EAAIA,MAAM,CAACC,OAArB,CAA6B,CACzBV,SAAS,CAACW,OAAV,CAAkB,KAAlB,CACAX,SAAS,CAACY,UAAV,CAAqB,IAArB,CACAZ,SAAS,CAACa,QAAV,CAAmBJ,MAAM,CAACI,QAA1B,CACH,CAJD,IAKI,CACAb,SAAS,CAACW,OAAV,CAAkB,KAAlB,CACAX,SAAS,CAACY,UAAV,CAAqB,KAArB,CACH,C,iFAGDZ,SAAS,CAACW,OAAV,CAAkB,KAAlB,CACAX,SAAS,CAACY,UAAV,CAAqB,KAArB,C,0dAMcR,CAAAA,KAAK,CAAC,SAAD,CAAW,CAC1BC,MAAM,CAAC,MADmB,CAE1BC,OAAO,CAAC,CACJ,SAAU,kBADN,CAEJ,eAAgB,kBAFZ,CAFkB,CAAX,C,QAAfC,G,uCAOeA,CAAAA,GAAG,CAACC,IAAJ,E,QAAfC,M,gBACJ,GAAIA,MAAM,EAAIA,MAAM,CAACC,OAArB,CAA6B,CACzBV,SAAS,CAACY,UAAV,CAAqB,KAArB,CACAZ,SAAS,CAACa,QAAV,CAAmB,EAAnB,CACH,C,qFAGDC,OAAO,CAACC,GAAR,e,gMAIC,gBACL,GAAIf,SAAS,CAACW,OAAd,CAAsB,CAClB,mBACI,YAAK,SAAS,CAAC,KAAf,uBACI,YAAK,SAAS,CAAC,WAAf,oCADJ,EADJ,CAOH,CARD,IASI,CACA,GAAGX,SAAS,CAACY,UAAb,CAAwB,CACxB,mBACI,YAAK,SAAS,CAAC,KAAf,uBACI,aAAK,SAAS,CAAC,WAAf,sBACaZ,SAAS,CAACa,QADvB,cAEI,KAAC,YAAD,EACI,IAAI,CAAE,SADV,CAEI,QAAQ,CAAE,KAFd,CAGI,OAAO,CAAG,yBAAM,CAAA,KAAI,CAACG,QAAL,EAAN,EAHd,EAFJ,GADJ,EADJ,CAaC,CACL,mBACI,YAAK,SAAS,CAAC,KAAf,uBACI,YAAK,SAAS,CAAC,WAAf,uBACI,KAAC,SAAD,IADJ,EADJ,EADJ,CAOC,CACJ,C,iBAjFalB,KAAK,CAACmB,S,EAoFxB,cAAelB,CAAAA,QAAQ,CAACI,GAAD,CAAvB","sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\nimport UserStore from './stores/UserStore';\nimport LoginForm from './LoginForm';\nimport SubmitButton from './SubmitButton';\nimport './App.css';\n\nclass App extends React.Component{\n    async componentDidMount(){\n        try {\n            let res=await fetch('/isLoggedIn',{\n                method:'post',\n                headers:{\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                }\n            });\n            let result = await res.json();\n            if (result && result.success){\n                UserStore.loading=false;\n                UserStore.isLoggedIn=true;\n                UserStore.username=result.username;\n            }\n            else{\n                UserStore.loading=false;\n                UserStore.isLoggedIn=false;\n            }\n        }\n        catch(e){\n            UserStore.loading=false;\n            UserStore.isLoggedIn=false;\n        }\n    }\n\n    async doLogout(){\n        try {\n            let res=await fetch('/logout',{\n                method:'post',\n                headers:{\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                }\n            });\n            let result = await res.json();\n            if (result && result.success){\n                UserStore.isLoggedIn=false;\n                UserStore.username='';\n            }\n        }\n        catch(e){\n            console.log(e);\n        }\n    }\n\n    render() {\n        if (UserStore.loading){\n            return (\n                <div className=\"app\">\n                    <div className='container'>\n                        Loading, please wait..\n                    </div>\n                </div>\n            );  \n        }\n        else{\n            if(UserStore.isLoggedIn){\n            return (\n                <div className=\"app\">\n                    <div className='container'>\n                        Welcome {UserStore.username}\n                        <SubmitButton\n                            text={'Log out'}\n                            disabled={false}\n                            onClick={ () => this.doLogout() }\n                        />\n\n                    </div>\n                </div>\n                );                  \n            }\n        return (\n            <div className=\"app\">\n                <div className='container'>\n                    <LoginForm/>\n                </div>\n            </div>\n            );\n        }\n    }\n}\n\nexport default observer(App);"]},"metadata":{},"sourceType":"module"}